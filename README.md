# Abituz

### Что это?
Заготовка агрегатора данных об абитуриентах вузов, находящихся в свободном доступе.

### Зачем это?
Узнать, что 15 человек, из-за которых ты на одну строчку ниже последнего бюджетного места, подали документы на ВМК и, возможно, уйдут туда.
Сравнить конкурсы на ФРТК и ФИВТ МФТИ.

### Что оно умеет?
Получать данные из некоего источника, хранить их и как-то показывать.
Например, можно посмотреть:
- `/`
- `/count`
- `/students`
- `/students/<name>`

### Как использовать?
Минимальное окружение:
```
$ python -m venv venv
$ source venv/bin/activate
(venv) $ pip install -r deploy/requirements.txt
(venv) $ export FLASK_APP=abituz.py
(venv) $ flask run
```
Переменные среды - см. `app/config.py`. Аргументы командной строки - см. `flask ds --help`.

Также в `app/deploy` есть Dockerfile и пример конфига docker-compose.
Также есть готовый *толстый* docker-образ: [bcskda/abituz](https://hub.docker.com/r/bcskda/abituz/)

### Как обновить данные?
```
(venv) $ export FLASK_APP=abituz.py
(venv) $ flask ds update --timer -i 3600     # Обновляться в цикле раз в час
(venv) $ APP_UPDATE_TIMER=1 flask ds update  # То же самое, но через переменные среды
(venv) $ flask ds update                     # Обновить один раз
```

### Какие источники уже есть?
МЭИ, МИФИ.

### Как добавить источник?
Добавить модуль в `app/datasource/impl` и обновляющую функцию в `app.datasource.enabled_sources`.
В качестве образца можно использовать имеющиеся источники.
Всё, что нужно, кажется, достаточно документировано в коде.
Для тестов можно использовать `flask ds test`.

### РКН не накажет?
Не должен, т.к. все списки находятся в свободном доступе, но это не точно.
